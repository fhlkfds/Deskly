{% extends "base.html" %}

{% block title %}{{ doc.title }} - Documentation{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h2><i class="bi bi-file-earmark-text"></i> {{ doc.title }}</h2>
        <p class="text-muted mb-0">
            Folder: {{ doc.folder.name if doc.folder else 'No folder' }} |
            Updated: {{ doc.updated_at.strftime('%Y-%m-%d %H:%M') }}
        </p>
    </div>
    <div class="col text-end">
        <a href="{{ url_for('docs.edit_document', doc_id=doc.id) }}" class="btn btn-primary">Edit</a>
        <a href="{{ url_for('docs.index') }}" class="btn btn-secondary">Back</a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <div id="docRendered"></div>
    </div>
</div>
<script type="application/json" id="docMarkdown">{{ doc.content_md|tojson }}</script>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    const raw = JSON.parse(document.getElementById('docMarkdown').textContent);
    document.getElementById('docRendered').innerHTML = marked.parse(raw || '');
</script>
{% endblock %}
